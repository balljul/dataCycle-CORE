<li class="content-item">
  <span class="content-title <%= 'global' if stored_search.system %>">
    <%= link_to root_path(stored_filter: stored_search.id) do %>
      <i class="fa fa-filter" aria-hidden="true"></i>
      <%= stored_search.name %>
    <% end %>
  </span>

  <% if stored_search.linked_stored_filter_id.present? %>
    <span class = "content-title">
      <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
      <%= stored_search.linked_stored_filter.name %>
    </span>
  <% end %>

  <span class="stored-filter-creator">
    <i class="fa fa-user" aria-hidden="true"></i>
    <a class="email-link" href="mailto:<%= stored_search.user.email %>"
                 title="<%= stored_search.user.full_name %> <<%= stored_search.user.email %>>">
                <%= stored_search.user.full_name %>
              </a>
    </span>

    <span class="content-date">
      <i class="fa fa-clock-o" aria-hidden="true"></i>
      <%= l(stored_search.created_at.to_datetime, locale: active_ui_locale) %>
    </span>

    <span class="content-attributes">
      <%= render 'data_cycle_core/application/filters/search_params', stored_search: stored_search %>
    </span>
    <span class="buttons">
      <% if stored_search.api %>
        <%= link_to send("api_#{DataCycleCore.main_config.dig(:api, :default)}_stored_filter_path", id: stored_search),
                      class: 'copy-to-clipboard',
                      data: {
                        value: send("api_#{DataCycleCore.main_config.dig(:api, :default)}_stored_filter_url", id: stored_search)
                      },
                      title: t('actions.copy_to_clipboard', locale: active_ui_locale) do %>
          <i class="fa fa-clipboard" aria-hidden="true"></i>
        <% end %>
      <% end %>

      <%= render 'data_cycle_core/application/downloads/download_indesign', content: stored_search if can?(:download_indesign, stored_search) %>

      <%= render 'data_cycle_core/application/downloads/download_zip', content: stored_search if can?(:download_zip, stored_search) %>

      <%= render 'data_cycle_core/application/downloads/download', content: stored_search if can?(:download, stored_search) %>

      <%= render 'data_cycle_core/application/preview/widget', content: stored_search if DataCycleCore::Feature::Preview.enabled? && stored_search.api %>

      <% if can?(:create_api, stored_search) %>
        <a id="update-stored-search-<%= stored_search.id %>" data-open="update-search-form-<%= stored_search.id %>" title="<%= t('common.change_api_access', locale: active_ui_locale) %>">
          <i class="fa fa-pencil" aria-hidden="true"></i>
        </a>
        <div class="reveal update-search-form" id="update-search-form-<%= stored_search.id %>" data-reveal>
          <h3><%= "#{stored_search.model_name.human(locale: active_ui_locale)} #{t('actions.edit', locale: active_ui_locale)}" %></h3>
          <div class="remote-render"
                       data-remote-path="data_cycle_core/stored_filters/edit_form"
                       data-remote-options="<%= to_query_params({ stored_search: stored_search, saved_stored_searches: saved_stored_searches }).to_json %>">
          </div>
        </div>
      <% end %>

      <%= link_to stored_filter_path(stored_search), method: :delete, data: { confirm: "#{t('data_cycle_core.stored_searches.saved', count: 1, locale: active_ui_locale)} #{t('actions.delete', locale: active_ui_locale)}?" } do %>
        <i class="fa fa-trash-o alert" aria-hidden="true"></i>
      <% end if can?(:destroy, stored_search) %>

    </span>
  </li>
