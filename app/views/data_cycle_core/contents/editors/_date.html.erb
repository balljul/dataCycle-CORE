<%= render 'data_cycle_core/contents/editors/attribute', key: key, definition: definition, value: value, options: options, content: content, parent: local_assigns[:parent] do %>

  <div class="form-element <%= key.attribute_name_from_key %>">
    <%= attribute_edit_label_tag(**local_assigns) %>

    <% unless attribute_editable?(key, definition, options, content) %>
      <%= text_field_tag key, l(value&.to_date, locale: active_ui_locale), options.except('class').merge({ class: 'read-only date', id: "#{local_assigns.dig(:options, :prefix)}#{sanitize_to_id(key)}" }) %>
    <% else %>
      <%= date_field_tag key, value, options.except('class').merge({ 'data-type': 'datepicker', id: "#{local_assigns.dig(:options, :prefix)}#{sanitize_to_id(key)}" }) %>
    <% end %>
  </div>

<% end %>
